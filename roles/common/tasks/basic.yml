---
# Checking connectivity to inventory hosts
- name: Connectivity check
  ping:

# Adding SSH Key from the local machine to the hosts when inject_ssh_key variable = yes
- name: Adding the SSH Key
  authorized_key:
    user: root
    state: present
    key: "{{ lookup('file', ssh_local_key_path) }}"
  when: inject_ssh_key
  notify: Test SSH with Key
 
# Setting the hostname on the hosts based on the inventory name
- name: Setting the hostname
  hostname:
    name: "{{ inventory_hostname }}"